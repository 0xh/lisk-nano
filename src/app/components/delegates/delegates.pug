div.offline-hide
  md-card(flex-gt-xs=100)
    md-card-title
      md-card-title-text
        span.md-title(layout='row')
          md-input-container.md-block
            label Search 
            input(type='text', name='name', ng-model='search', ng-model-options='{ debounce: 200 }')
          i.material-icons.search-append(ng-click='search = ""', ng-if='search') close 
          i.material-icons.search-append(ng-hide='search') search 
      span(md-position-mode='target-right target')
        md-button.pull-right(ng-click='$ctrl.openVoteDialog()')
          i.material-icons done
          span  Vote 
          span(ng-if='$ctrl.voteList.length || $ctrl.unvoteList.length') 
            span (
            span.green-link(ng-if='$ctrl.voteList.length') +{{$ctrl.voteList.length}}
            span(ng-if='$ctrl.voteList.length && $ctrl.unvoteList.length') /
            span.red-link(ng-if='$ctrl.unvoteList.length') -{{$ctrl.unvoteList.length}}
            span )
    md-content(layout='column')
      md-table-container(ng-show='$ctrl.delegates.length')
        table(md-table)
          thead(md-head)
            tr(md-row)
              th(md-column) Vote
              th(md-column) Rank  
              th(md-column) Name 
              th(md-column) Lisk Address
              th(md-column) Uptime 
              th(md-column) Approval 
          tbody(md-body, infinite-scroll='$ctrl.showMore()', infinite-scroll-distance='1')
            tr(md-row, ng-hide='$ctrl.filteredDelegates.length')
              td(md-cell, colspan='6') No delegates found
            tr(md-row, ng-repeat="delegate in ($ctrl.filteredDelegates = ($ctrl.delegates | filter : {username: search} )) | limitTo : $ctrl.delegatesDisplayedCount", ng-class='{"downvote": delegate.status.voted && !delegate.status.selected, "upvote": !delegate.status.voted && delegate.status.selected}')
              td(md-cell)
                md-checkbox(ng-model='delegate.status.selected', ng-change='$ctrl.selectionChange(delegate)', aria-label='delegate selected for voting')
              td(md-cell) {{ delegate.rate}}
              td(md-cell) {{ delegate.username}}
              td(md-cell) {{ delegate.address}}
              td(md-cell) {{ delegate.productivity}}
              td(md-cell) {{ delegate.approval}}
      md-button.more(ng-show='$ctrl.delegatesDisplayedCount < $ctrl.filteredDelegates.length', ng-click='$ctrl.showMore()') Show More
      .loading
        md-progress-linear(md-mode='indeterminate', ng-show='$ctrl.loading')
