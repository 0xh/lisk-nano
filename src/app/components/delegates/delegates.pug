div.offline-hide
  md-card(flex-gt-xs=100)
    md-card-title
      md-card-title-text
        span.md-title
          span Delegates:
          span.filter-select
            md-select(ng-model='filter', aria-label='Delegate state filter')
              md-option(ng-repeat='state in states', ng-value='state') {{ state }}
          // span ({{$ctrl.filteredDelegates.length}})
      span(md-position-mode='target-right target')
        md-button.pull-right(ng-click='$ctrl.confirmVote()')
          i.material-icons done
          span  Vote 
          span(ng-show='$ctrl.voteList.length || $ctrl.unvoteList.length') 
            span (
            span.green-link(ng-show='$ctrl.voteList.length') +{{$ctrl.voteList.length}}
            span(ng-show='$ctrl.voteList.length && $ctrl.unvoteList.length') /
            span.red-link(ng-show='$ctrl.unvoteList.length') -{{$ctrl.unvoteList.length}}
            span )
    md-content(layout='column')
      md-table-container(ng-show='$ctrl.delegates.length')
        table(md-table)
          thead(md-head)
            tr(md-row)
              th(md-column) Vote
              th(md-column)
                span Rank  
                i.material-icons sort
              th(md-column) 
                span(ng-hide='$ctrl.searchActive', ng-click='$ctrl.activateSearch()') 
                  span Name 
                  i.material-icons search 
                md-input-container.md-block(ng-show='$ctrl.searchActive')
                  label Name 
                  input(type='text', name='name', ng-model='$ctrl.search', autofocus)
                  i.material-icons(ng-click='$ctrl.searchActive=false; $ctrl.search = ""') close 
              th(md-column) Lisk Address
              th(md-column)
                span Uptime 
                i.material-icons sort
              th(md-column)
                span Approval 
                i.material-icons sort
          tbody(md-body, infinite-scroll='$ctrl.showMore()', infinite-scroll-distance='1')
            tr(md-row, ng-hide='$ctrl.filteredDelegates.length')
              td(md-cell, colspan='6') No delegates found
            tr(md-row, ng-repeat="delegate in ($ctrl.filteredDelegates = ($ctrl.delegates | filter : {username: $ctrl.search} | boolFilter: {status : filter})) | limitTo : $ctrl.delegatesDisplayedCount", ng-class='{"downvote": delegate.status.Voted && delegate.status.Changed, "upvote": !delegate.status.Voted && delegate.status.Changed}')
              td(md-cell)
                md-checkbox(ng-model='delegate.status.Selected', ng-change='$ctrl.selectionChange(delegate)', aria-label='delegate selected for voting')
              //td.status(md-cell) 
                span(ng-repeat='(status, value) in delegate.status', ng-if='status != "Selected" && status != "All" && value')
                  span  
                  span.label(ng-bind='status')
              td(md-cell) {{ delegate.rate}}
              td(md-cell) {{ delegate.username}}
              td(md-cell) {{ delegate.address}}
              td(md-cell) {{ delegate.productivity}}
              td(md-cell) {{ delegate.approval}}
      md-button.more(ng-show='$ctrl.delegatesDisplayedCount < $ctrl.filteredDelegates.length', ng-click='$ctrl.showMore()') Show More
      .loading
        md-progress-linear(md-mode='indeterminate', ng-show='!$ctrl.loaded')
